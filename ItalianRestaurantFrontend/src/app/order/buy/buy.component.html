<div class="container" style="margin-top: 20px" *ngIf="isContentLoaded">
  <div class="text-content">
    <h2 class="title text-center">
      Order Details
    </h2>
    <form class="form" [formGroup]="buyForm" (ngSubmit)="onBuySubmit()">


      <mat-radio-button [style.visibility]="!(showHint && lastDelivery) ? 'hidden' : 'visible' "
                        (change)="onPopulateInput()" id="hint">
        Fill in the form with previous delivery values
      </mat-radio-button>

      <mat-form-field class="form-element" appearance="outline">
        <mat-label>Address</mat-label>
        <input type="text" matInput formControlName="address" placeholder="Ex. Kwiatowa 23">
        <mat-error *ngIf="buyForm.get('address')?.hasError('required')">
          Address is <strong>required</strong>
        </mat-error>
      </mat-form-field>

      <mat-form-field class="form-element" appearance="outline">
        <mat-label>City</mat-label>
        <input type="text" matInput formControlName="city" placeholder="Ex. Wroclaw">
        <mat-error *ngIf="buyForm.get('city')?.hasError('required')">
          City is <strong>required</strong>
        </mat-error>
      </mat-form-field>

      <mat-form-field class="form-element" appearance="outline">
        <mat-label>Postal code</mat-label>
        <input type="text" matInput maxlength="6" formControlName="pcode" placeholder="Ex. 50-527">
        <mat-error *ngIf="buyForm.get('pcode')?.hasError('pattern') && !buyForm.get('pcode')?.hasError('required')">
          Please enter a valid postal code
        </mat-error>
        <mat-error *ngIf="buyForm.get('pcode')?.hasError('required')">
          Postal code is <strong>required</strong>
        </mat-error>
      </mat-form-field>

      <mat-form-field class="form-element" appearance="outline">
        <mat-label>Floor</mat-label>
        <input type="text" matInput formControlName="floor" placeholder="Ex. 3"/>
        <mat-error *ngIf="buyForm.get('floor')?.hasError('pattern')">
          Please enter a valid floor number (only digits are allowed).
        </mat-error>
      </mat-form-field>

      <mat-form-field class="form-element" appearance="outline">
        <mat-label>Additional info for provider</mat-label>
        <textarea formControlName="info" rows="5" matInput></textarea>
      </mat-form-field>

      <mat-radio-group
        formControlName="deliveryOption"
        class="radio-group">
        <mat-radio-button id="KNOCK" value="KNOCK">
          Knock On The Door
        </mat-radio-button>
        <mat-radio-button id="LEAVE" value="LEAVE">
          Leave At The Door
        </mat-radio-button>
        <mat-error *ngIf="buyForm.get('deliveryOption')?.hasError('required')">
          Please select a delivery option.
        </mat-error>

      </mat-radio-group>

      <button type="submit" class="proceed-btn" [disabled]="buyForm.invalid">Make An Order</button>
    </form>
  </div>
</div>
